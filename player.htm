<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>JsScratch</title>
		<script type="text/javascript" src="./js/morphic.js"></script>
		<script type="text/javascript" src="./js/morphicchanges.js"></script>
		<script type="text/javascript" src="./js/scratchio.js"></script>
		<script type="text/javascript" src="./js/jsscratch.js"></script>
		<script type="text/javascript" src="./js/jdataview.js"></script>
		<script type="text/javascript">
			var worldMorph, player, version = "JsScratch June 5, 2012", urlVars = getUrlVariables();
			var projectUrl = urlVars['project'] ? urlVars['project'] : null;
			
			function log (str) {
				var log = document.getElementById('log');
				if (log) {
					log.textContent += str + '\n';
				}
				if (console) {
					console.log(str);
				}
			}
			
			window.onerror = function (e) {
				log(e);
			}
			
			window.onload = function() {
				try {
					worldMorph = new WorldMorph(document.getElementById('javascriptplayer'), false);
					onbeforeunload = null;
					worldMorph.isDevMode = true;
					player = new PlayerFrameMorph();
					worldMorph.add(player);
					player.setup();
					setInterval(function () {
						worldMorph.doOneCycle();
					}, 0);
					document.onselectstart = function (e) {
						e.preventDefault();
					};
				} catch (e) {
					log(e)
				}
			}
			function getUrlVariables() {
				var vars = [], hash;
				var hashes = window.location.search.substr(1).split('&');
				for(var i = 0; i < hashes.length; i++) {
					hash = unescape(hashes[i].replace(/\+/g, " ")).split('=');
					vars[hash[0]] = hash[1];
				}
				return vars;
			}
		</script>
	</head>
	<body>
		<canvas id="javascriptplayer" width="482" height="387" style="user-select: none;" tabindex="1">
			Sorry, your browser does not support the <code>canvas</code> tag! <a href="http://www.google.com/chrome/">Get Chrome!</a>
		</canvas>
		<br/>
		<textarea id="log" rows="10" readonly="readonly" style="width: 482px;"></textarea>
	</body>
</html>